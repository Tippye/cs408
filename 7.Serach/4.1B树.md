# B树

## 定义

B树(多路平衡查找树)就是[二叉排序树](./3.1二叉排序树.md)的一般化, 可以理解为M叉排序树

> B树非常适合读取和写入相对较大的数据块(如光盘)的存储系统；它通常用于数据库和文件系统

- m阶B树满足条件：
    - 叶子结点指查找失败的结点(NULL结点)
    - 每个节点最多只有m个子结点
    - 非叶子结点(除了根结点)**至少**有$\lceil m/2 \rceil$个分叉
    - 根结点最多有m棵子树，至少2个子树
    - 具有k个子结点的非叶子结点包含k-1个键
    - 所有的叶子结点都在同一层上（子树高度相同）
- B树性质：
    - 结点的孩子个数等于该结点中关键字个数+1
        - ![okLNTV](https://cdn.staticaly.com/gh/tippye/PicCloud@master/uPic/2023/01/25/okLNTV.png)
    - 如果根结点没有关键字就没有子树，此时B树为空
    - 根结点子树数$\in [2, m]$, 关键字数$\in [1, m-1]$
    - 其他结点子树数$\in [\lceil m/2 \rceil, m]$, 关键字数$\in [\lceil m/2 \rceil -1, m-1]$
    - 结点中关键字从左到右递增有序，关键字两侧均有指向子树的指针，左边指针所指子树的所有关键字均小于该关键字，右边指针所指子树的所有关键字均大于该关键字
    - n个关键字的B树必有n+1个叶子结点，$n+1 \ge 2(\lceil m/2 \rceil)^{h-1}$, 即$h \le log_{\lceil m/2
      \rceil}\frac{n+1}2+1$
- B树的高度
    - 大多数情况不包括叶子结点（失败结点）那一层
    - 包含n个关键字，阶数为m的B树
    - 树高$h \ge log_m(n+1)$ 